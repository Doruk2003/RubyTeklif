<!DOCTYPE html>
<html class="m-0 p-0" style="margin:0; padding:0;">
  <head>
    <title><%= content_for(:title) || "Ruby Teklif App" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Ruby Teklif App">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="m-0 p-0 bg-slate-900" style="margin:0; padding:0;">
    <div class="w-full">
      <% active_link_class = "relative inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold text-white after:absolute after:inset-x-2 after:-bottom-1 after:h-0.5 after:bg-white/70 after:opacity-100 after:transition after:duration-200" %>
      <% default_link_class = "relative inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold text-slate-100 transition after:absolute after:inset-x-2 after:-bottom-1 after:h-0.5 after:bg-white/70 after:opacity-0 after:transition after:duration-200 hover:after:opacity-100" %>
      <nav class="bg-slate-900 px-4 py-6 text-slate-100 shadow-lg shadow-slate-900/20 fixed top-0 left-0 right-0 z-50 min-h-[76px]" style="background-color:#0f172a; color:#f8fafc; margin:0;">
        <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
          <div class="flex items-center gap-3">
            <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-white text-slate-900 text-sm font-semibold">RT</div>
            <div>
              <div class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-300">RubyTeklif</div>
              <div class="text-sm font-semibold text-white">ERP Kontrol Paneli</div>
            </div>
          </div>

          <div class="flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center">
            <%= link_to "Dashboard", home_path, class: (current_page?(home_path) ? active_link_class : default_link_class) %>
            <div class="group relative">
              <button type="button" class="<%= current_page?(companies_path) || current_page?(new_company_path) ? active_link_class : default_link_class %> focus:outline-none">
                Müşteriler
                <span class="text-xs text-slate-300 group-hover:text-white">▾</span>
              </button>
              <div class="pointer-events-none invisible opacity-0 translate-y-1 transition duration-150 group-hover:pointer-events-auto group-hover:visible group-hover:opacity-100 group-hover:translate-y-0 group-focus-within:pointer-events-auto group-focus-within:visible group-focus-within:opacity-100 group-focus-within:translate-y-0 sm:absolute sm:left-0 sm:top-full sm:-mt-2 sm:pt-2 sm:min-w-[220px] z-20">
                <div class="rounded-xl border border-slate-200 bg-white p-2 shadow-lg">
                  <%= link_to "Müşteri tanımlama", new_company_path, class: "block rounded-lg px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100" %>
                  <%= link_to "Müşteri listesi", companies_path, class: "block rounded-lg px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100" %>
                </div>
              </div>
            </div>
            <div class="group relative">
              <button type="button" class="<%= current_page?(products_path) || current_page?(new_product_path) ? active_link_class : default_link_class %> focus:outline-none">
                Ürünler
                <span class="text-xs text-slate-300 group-hover:text-white">▾</span>
              </button>
              <div class="pointer-events-none invisible opacity-0 translate-y-1 transition duration-150 group-hover:pointer-events-auto group-hover:visible group-hover:opacity-100 group-hover:translate-y-0 group-focus-within:pointer-events-auto group-focus-within:visible group-focus-within:opacity-100 group-focus-within:translate-y-0 sm:absolute sm:left-0 sm:top-full sm:-mt-2 sm:pt-2 sm:min-w-[220px] z-20">
                <div class="rounded-xl border border-slate-200 bg-white p-2 shadow-lg">
                  <%= link_to "Ürün tanımlama", new_product_path, class: "block rounded-lg px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100" %>
                  <%= link_to "Ürün listesi", products_path, class: "block rounded-lg px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100" %>
                </div>
              </div>
            </div>
            <%= link_to "Teklifler", offers_path, class: (current_page?(offers_path) ? active_link_class : default_link_class) %>
            <%= link_to "Kurlar", currencies_path, class: (current_page?(currencies_path) ? active_link_class : default_link_class) %>
          </div>

          <div class="flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center">
            <div class="flex items-center gap-3 text-sm text-slate-200">
              <div class="flex h-9 w-9 items-center justify-center rounded-lg bg-white text-xs font-semibold text-slate-900">DU</div>
              <div class="leading-tight">
                <div class="font-semibold text-white">Demo Kullanıcı</div>
                <div class="text-xs text-slate-300">Yetki: Yönetici</div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>

    <main class="min-h-screen m-0 p-0 pt-16 bg-slate-50">
<%#  %>      <%= yield %>
    </main>
  </body>
</html>
