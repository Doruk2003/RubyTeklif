<%= form_with url: form_url, scope: :category, method: form_method, local: true, class: app_form_class("d-grid gap-3") do |f| %>
  <%= hidden_field_tag :return_to, params[:return_to].to_s %>

  <% existing_code = category[:code] || category["code"] %>
  <% existing_active = category.key?(:active) ? category[:active] : category["active"] %>
  <% if existing_code.present? %>
    <%= f.hidden_field :code, value: existing_code %>
  <% end %>
  <% unless existing_active.nil? %>
    <%= f.hidden_field :active, value: (existing_active ? "1" : "0") %>
  <% end %>

  <div class="form-floating">
    <%= f.text_field :name, value: category[:name] || category["name"], placeholder: "Kategori Adi", class: "form-control" %>
    <%= f.label :name, "Kategori Adi" %>
  </div>

  <p class="small text-secondary mb-0">Kategori kodu otomatik olusturulur.</p>

  <div>
    <%= f.submit submit_label, class: "btn-primary w-100", data: { turbo_confirm: "Kategori kaydi kaydedilsin mi?" } %>
  </div>
<% end %>
